import{w as h,r as n,j as t}from"./chunk-EPOLDU6W-CtJUS6UA.js";import{P as m,I as x,B as f,C as D}from"./Page-CddeMGQL.js";import{L as c}from"./Layout-oDW7u1wt.js";import{D as S}from"./DataTable-pT-7qub0.js";import"./context-L_wT5nQs.js";import"./index-CfIiKg0r.js";import"./Sticky-DM3L7XRA.js";const L=h(function(){const[r,l]=n.useState([]),[d,i]=n.useState(!0);n.useEffect(()=>{o()},[]);const o=async()=>{const e=await fetch("/api/update-scheduled",{method:"GET"});if(e.ok){const a=await e.json();l(a)}i(!1)},u=async()=>{(await fetch("/api/update-scheduled",{method:"POST"})).ok&&o()},p=r.map(e=>{var a,s;return[e.collectionTitle||"Unknown",e.scheduleInterval&&e.scheduleInterval>1?`Every ${e.scheduleInterval} ${(a=e.schedule)==null?void 0:a.replace("ly","")}(s)`:((s=e.schedule)==null?void 0:s.replace("ly",""))||"Unknown",new Date(e.nextUpdate).toLocaleString(),e.numProducts.toString(),e.startDate?new Date(e.startDate).toLocaleDateString():"Immediate",e.endDate?new Date(e.endDate).toLocaleDateString():"No end"]});return t.jsx(m,{title:"Scheduled Discounts",children:t.jsx(c,{children:t.jsxs(c.Section,{children:[t.jsx(x,{align:"end",children:t.jsx(f,{primary:!0,onClick:u,loading:d,children:"Manual Refresh All Due"})}),t.jsx(D,{children:t.jsx(S,{columnContentTypes:["text","text","text","numeric","text","text"],headings:["Collection","Frequency","Next Update","Quantity","Start Date","End Date"],rows:p})})]})})})});export{L as default};
